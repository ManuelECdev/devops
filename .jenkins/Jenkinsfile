pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
		sh """
                    export PATH="/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/var/lib/jenkins/.local/bin:$PATH"
                    echo ${PATH}
		    make install
		    make lint
                    make hadolint
                """
            }
        }

        stage('Deploy') {
            steps {
                sh """
                    export PATH="/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/var/lib/jenkins/.local/bin:$PATH"
                    eksctl get cluster --name udafinalproject --region us-east-1
                """
            }
        }
    }
}
